import * as React from 'react';
import * as classNames from 'classnames';
import { PropTypes as PT } from 'prop-types';
import 'nav-frontend-snakkeboble-style'; // eslint-disable-line import/extensions
import { Panel } from 'nav-frontend-paneler';
import { Undertekst } from 'nav-frontend-typografi';

const snakkebobleCls = (hoyre) => classNames('snakkeboble', {
    'snakkeboble--hoyre': hoyre, 'snakkeboble--venstre': !hoyre
});

export interface SnakkebobleProps {
    dato: string;
    children: React.ReactChildren | React.ReactChild | React.ReactNode;
    pilHoyre?: boolean;
    ikonClass?: string;
}

/**
 * En snakkeboble for dialog
 */
class Snakkeboble extends React.Component<SnakkebobleProps> { // eslint-disable-line react/prefer-stateless-function
    render() {
        const { dato, children, pilHoyre, ikonClass } = this.props;
        return (
            <div className={snakkebobleCls(pilHoyre)}>
                <i className={ikonClass} />
                <div className="snakkeboble__snakkeboble-pil-container">
                    <i className="snakkeboble__snakkebole-pil" />
                </div>
                <Panel className="snakkeboble-panel">
                    <Undertekst className="snakkeboble-panel__dato">{dato}</Undertekst>
                    <div className="snakkeboble-panel__tekst">{children}</div>
                </Panel>
            </div>
        );
    }
}

(Snakkeboble as React.ComponentClass).defaultProps = {
    /**
     * Default er at pilen peker mot venstre
     */
    pilHoyre: false,
    /**
     * Gir enkel default styling på ikoner
     */
    ikonClass: 'snakkeboble__ikon'
};

(Snakkeboble as React.ComponentClass).propTypes = {
    /**
     * Dato for melding
     */
    dato: PT.string.isRequired,
    /**
     * Tekst for melding
     */
    children: PT.node.isRequired,
    /**
     * Settes denne peker pilen til snakkeboblen mot høyre, og snakkeboblen og teksten i snakkeboblen flyter mot høyre.
     */
    pilHoyre: PT.bool,
    /**
     * Klasse som brukes på ikonet. Dette lar deg styre form, farge og illustrasjon.
     */
    ikonClass: PT.string
};

export default Snakkeboble;
