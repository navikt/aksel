import React, { Component } from 'react';
import PT from 'prop-types';
import { omit } from 'nav-frontend-js-utils';
import Textarea from './textarea';

class TextareaControlled extends Component {
    constructor(props) {
        super(props);
        this.state = { text: props.defaultValue || '' };
        this.onChange = this.onChange.bind(this);
    }

    onChange(e) {
        this.setState({ text: e.target.value });
    }

    render() {
        return <Textarea onChange={this.onChange} value={this.state.text} {...this.props} />;
    }
}

TextareaControlled.propTypes = {
    ...omit(Textarea.propTypes, 'value', 'onChange'),
    defaultValue: PT.string
};
TextareaControlled.defaultProps = omit(Textarea.defaultProps, 'value', 'onChange');

export default TextareaControlled;
