import { Meta } from "@storybook/addon-docs";

<Meta title="ds-react/Migration" />

# Migreringsguider

## Migrering til ds-css v0.12, ds-tokens v0.7

### Tokens er refaktort og oppdatert

- Vi har nå fått helt nye tokens synket fra 3.0 biblioteket i Figma.
- Dette vi si at de som har brukt tokens for styling i sitt prosjekt må gå gjennom å fikse alle endringene.
- Hvis du bare har brukt react-komponentene rett ut av boken så har denne endringene ikke noe å si for deg.

## Migrering til ds-react v0.11, ds-css v0.10

### ErrorSummary

- ErrorSummaryItem -> ErrorSummary.Item
  Må da slette import "ErrorSummaryItem" da denne ikke er eksponert alene lengre

### SearchField

- SearchFieldButton -> SearchField.Button
- SearchFieldClearButton -> SearchField.Clear
- SearchFieldInput -> SearchField.Input

SearchFieldButton, SearchFieldClearButton og SearchFieldInput må da slettes fra imports da de ikke er eksponert lengre.

### CopyToClipBoard

Komponenten er flyttet til pakkene "@navikt/ds-react-internal" og "@navikt/ds-css-internal". API er ikke endret
så fikses med

```bash
yarn install @navikt/ds-react-internal @navikt/ds-css-internal
```

## Migrering til ds-react, ds-css v0.8.0

Denne guiden vil være til hjelp for de som allerede har begynt å ta i bruk de nye pakkene våre tidligere enn v0.8.0.
For de som ikke har begynt å ta i bruk pakkene kan man se bort fra denne.

Fra versjon v0.7 til v0.8 er det komment flere store endringer både i ds-react og ds-css. For å lettere
oppdatere til v0.8 har vi da laget en liten guide som forklarer de største endringene.

## Styling

De fleste komponenter har fått diverse justering på styling. Anbefales da å ta en rask sjekk om alt fortsatt stemmer
etter oppdateringen.

## Sizing

Alle komponenter som tidligere var implementert med `size`-prop har fått oppdatert
props fra "xs", "s", "m", "l", "xl", "2xl" -> "xsmall", "small", "medium", "large", "xlarge", "2xlarge".

Dette betyr også at css-stylingen er eks endret fra `.navds-body-short--s` -> `.navds-body-short--small`

## Overridable component

Komponenter som tidligere implementerte ovveridable component med bruk av `component`-prop bruker nå `as`.
Implementasjonen av OverridableComponent er WIP så kan hende typene ender opp med å krangle i enkelte tilfeller. Om så ta gjerne kontakt med oss
slik at vi får sett på det tilfellet!

```jsx
/* Før */
<BodyShort component="span" />

/* Etter */
<BodyShort as="span" />
```

## Navneendringer

### Buttons

- `Primary` -> `Secondary` (Normal)
- `Action` -> `Primary` (Hoved)
- `Secondary` -> `Tertiary` (Flat)

For alle som har brukt `<Button />` så må man fikse slik at riktige knapper blir brukt der de skal!

## Nytt

- GuidePanel (veilederpanel)
- HelpText (Hjeleptext)

### Typography

Vi har valgt å endre fra `<Title/>` -> `<Heading/>` i typografien vår da dette ga mer mening i bruk.
APIet til komponenten er ikke endret borsett fra "Sizing" endringene nevt lengre opp, så skal bare være en rask search/replace.

For de som har brukt css-en direkte, eks `navds-title` så må man endre til `navds-heading`

Endret `Header` -> `PageHeader`, samme som er nevnt ang endringen over gjelder her også: sjekk css hvis brukt direkte.

## Fjernet komponenter

Fjernet da den var utdaterte/må ses mer på

- ProductPageLayout

## Typography

Linjehøyder for alle typo-komponentene er oppdatert til å matche figma.

Lagt til en Heading lvl 6 og size="xsmall"

## AccordionMenu

Implementert med dot-notation

- Trenger bare importere AccordionMenu
- AccordionMenuCollapsable -> AccordionMenu.Collapsable
- AccordionMenuItem -> AccordionMenu.Item

## Accordion

Implementert med dot-notation

- Trenger bare importere Accordion nå

Fragmenterte komponenten:

- Accordion -> Accordion.Item
- Header -> Accordion.Header
- children -> Accordion.Content

La til prop: `defaultOpen` på `Accordion.Item`

```jsx
/* Før */
<Accordion heading="tittel" open={open} onClick={(open) => setOpen(!open)}>
  Eu magna fugiat officia
</Accordion>
<Accordion heading="tittel2" open={open2} onClick={(open2) => setOpen(!open2)}>
  Eu magna fugiat officia
</Accordion>

/* Etter */
<Accordion>
  <Accordion.Item open={open}>
    <Accordion.Header onClick={(open) => setOpen(!open)}>
      Accordion header text
    </Accordion.Header>
    <Accordion.Content>
      Magna aliquip aliquip fugiat nostrud nostrud velit pariatur veniam officia
      laboris voluptate officia pariatur.Lorem est ex anim velit
    </Accordion.Content>
  </Accordion.Item>
  <Accordion.Item open={open2}>
    <Accordion.Header onClick={(open2) => setOpen(!open2)}>
      Accordion header text
    </Accordion.Header>
    <Accordion.Content>
      Magna aliquip aliquip fugiat nostrud nostrud velit pariatur veniam officia
      laboris voluptate officia pariatur.Lorem est ex anim velit
    </Accordion.Content>
  </Accordion.Item>
</Accordion>
```

## Alert

- La til `fullWidth`-prop for alert uten border-radius og width 100%
- La til `inline`-prop for alert med transparent border/background og 0 padding.

## Button

Oppdatert med Overridablecomponent.

Håndtering av sentrering, margins er oppdatert. Trenger ikke wrappe tekst med `span` når man skal bruke ikoner lengre.

Hvis man skal manuelt justere på alignment av innhold, eks bruke `flex-direction: column` må man sette
det på css-klassen `.navds-button__inner` da children er wrappet i den.

## CopyToClipboard

Ekstender nå ButtonProps, slik at man eks kan ta i bruk `size`-proppen

`text`-prop -> `copyText`
`label`-prop -> `popoverText`

Fjernet `icon`-prop, la til `popoverPlacement`

## Modal

Implementert med dot-notasjon

Innholds-padding er flyttet fra Modal -> Modal.Content

```
/* Før */
<Modal>Modal innhold</Modal>

/* Etter */
<Modal><Modal.Content>Modal innhold</Modal.Content></Modal>
```

## LinkPanel

Implementert med dot-notasjon

```jsx
/* Før */
<LinkPanel href="#">Consectetur eu duis aliqua eu irure fugiat fugiat eu.</LinkPanel>

/* Etter */
<LinkPanel href="#">
  <LinkPanel.Title>
    Consectetur eu duis aliqua eu irure fugiat fugiat eu.
  </LinkPanel.Title>
</LinkPanel>
```

Kan nå legge til en beskrivelse med `Linkpanel.Description`

```jsx
<LinkPanel href="#">
  <LinkPanel.Title>
    Consectetur eu duis aliqua eu irure fugiat fugiat eu.
  </LinkPanel.Title>
  <LinkPanel.Description>Aliqua id aliquip Lorem esse</LinkPanel.Description>
</LinkPanel>
```

## Popover

Implementert med dot-notasjon

Får nå padding rundt innhold med Popover.Content

```jsx

/* Før */

<Popover>Popover innhold</Popover>

/* Etter */

<Popover>
  <Popover.Content>Modal innhold</Popover.Content>
</Popover>
```

## Header -> PageHeader

Props må fikses for de som har brukt denne komponenten, i tilleg til å endre navn.

- `variant`-prop -> `align`
- `theme`-prop -> `variant`

## MicroCard

- Oppdatert med OverridableComponent

## SpeechBubble

Implementert med Dot-notasjon

- `<Bubble/>` -> `<SpeechBubble.Bubble/>`

Bubble er fortsatt eksportert så vil ikke brekke noe for de som har begynt å ta denne i bruk.
